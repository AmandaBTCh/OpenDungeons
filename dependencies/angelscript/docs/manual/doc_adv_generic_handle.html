<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AngelScript: Registering a generic handle type</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="contents">
<h1><a class="anchor" name="doc_adv_generic_handle">Registering a generic handle type </a></h1>Sometimes it is useful to be able to take a reference to an object without having to force specific implementation on the object, e.g. when providing a generic storage class to scripts, or providing a generic messaging system.<p>
In AngelScript there is no common denominator for all object types, the reaons for this is that script classes and application registered classes have completely different implementation and cannot be generalized under a single superclass.<p>
Instead, AngelScript provides an alternative by allowing the application to register a generic handle type. This type would be implemented according to the application's needs, but to the script it would look like it was a generic <a class="el" href="doc_script_handle.html">handle</a> that can reference any reference type. With this the type will be able to hold objects, <a class="el" href="doc_datatypes_funcptr.html">functions</a>, and <a class="el" href="doc_addon_array.html">arrays</a>.<p>
To register the generic handle type, the application should follow the same principles as for a <a class="el" href="doc_register_val_type.html">value type</a>, except for a few details, that will be described here.<p>
<ul>
<li>The type must be registered with the additional flag <a class="el" href="angelscript_8h.html#855d86fa9ee15b9f75e553ee376b5c7adf3d1f30658e593f48c5c5f542ac4845">asOBJ_ASHANDLE</a>. This is the flag that tells AngelScript that the type simulates a generic handle.</li></ul>
<p>
<ul>
<li>In order to allow assigning any handle to the type, the <a class="el" href="doc_script_class_ops.html">opAssign</a> method must be registered with a <a class="el" href="doc_adv_var_type.html">variable paramater type</a>, e.g. 'ref &amp;opAssign(const ?&amp;in)'.</li></ul>
<p>
<ul>
<li>The <a class="el" href="doc_script_class_ops.html">opEquals</a> method must also be registered with a <a class="el" href="doc_adv_var_type.html">The variable parameter type</a> in order to allow the is and !is operators to behave as expected for a handle, e.g. 'bool opEquals(const ?&amp;in)'.</li></ul>
<p>
<ul>
<li>Finally the <a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c520746394824509f369f860ea1e96d1f6">asBEHAVE_REF_CAST</a> behaviour must be registered with the signature 'void f(?&amp;out)' in order to allow a dynamic cast to any other type.</li></ul>
<p>
As this is a quite useful type, with really very little need for customization, a standard add-on with this implementation has been provided with the SDK.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="doc_addon_handle.html">ref object</a> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Aug 21 13:13:47 2011 for AngelScript by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
